import {
- FF
- FM
- core.errno {system}
}

define use-file(): system(unit) {
  try file = open("./test", FF.for-rw, FM.default-file-mode) in
  try _ = write("hey\n", file) in
  try _ = read(file) in
  Pass(close(file, (_) => {
    Unit
  }))
}

define main(): unit {
  match use-file() {
  - Pass(_) =>
    Unit
  - Fail(_) =>
    Unit
  }
}
